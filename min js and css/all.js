"use strict";function newGame(n,e,t,a){function o(n,e){this.x=n,this.y=e}function i(n){for(var e=0,t=0;t<=4;t++){var a=new o(e,0);n.push(a),e+=y}}function c(n,e){this.x=n,this.y=e,this.framePosition=0}function r(){for(var n=Math.floor(20*Math.random()+1)*y,e=Math.floor(20*Math.random()+1)*y,t=!0,a=0;a<k.length;a++)k[a].x==n&&k[a].y==e&&(t=!1);t?x=new c(n,e):r()}function h(n,e,t){E.fillStyle=a,E.fillRect(0,0,m.width,m.height);for(var o=0;o<n.length;o++)if(o==n.length-1)switch(t){case"up":E.drawImage(C,0,0,y,y,n[o].x,n[o].y,y,y);break;case"down":E.drawImage(C,y,0,y,y,n[o].x,n[o].y,y,y);break;case"right":E.drawImage(C,2*y,0,y,y,n[o].x,n[o].y,y,y);break;case"left":E.drawImage(C,3*y,0,y,y,n[o].x,n[o].y,y,y)}else E.drawImage(C,4*y,0,y,y,n[o].x,n[o].y,y,y);E.drawImage(j,e.framePosition*y,0,y,y,e.x,e.y,y,y),e.framePosition<9?e.framePosition++:e.framePosition=0}function l(n){(n[n.length-1].x<0||n[n.length-1].y<0||n[n.length-1].x>m.width||n[n.length-1].y>m.height)&&(clearInterval(b),confirm("GAME OVER"),location.reload());for(var e=0;e<n.length-1;e++)n[e].x==n[n.length-1].x&&n[e].y==n[n.length-1].y&&(clearInterval(b),confirm("GAME OVER"),location.reload())}function s(n,e){return n[n.length-1].x==e.x&&n[n.length-1].y==e.y&&(r(),M++,f(),d(),!0)}function f(){M>0&&M%10==0&&(w-=10,I++)}function d(){v.innerHTML="RESULT: "+M,p.innerHTML="LEVEL: "+I}function g(n,e,t){var a=void 0,i=void 0;switch(n){case"up":a=e[e.length-1].x,i=e[e.length-1].y-y;break;case"down":a=e[e.length-1].x,i=e[e.length-1].y+y;break;case"right":a=e[e.length-1].x+y,i=e[e.length-1].y;break;case"left":a=e[e.length-1].x-y,i=e[e.length-1].y}var c=new o(a,i);e.push(c),s(e,t)||e.shift(),h(e,t,n),l(e)}function u(n){clearInterval(b),b=setInterval(function(){g(n,k,x)},w)}$(".allMenus").html(" "),$("<canvas/>",{id:"canvas"}).appendTo(".game");var m=$("#canvas")[0],v=$("#result")[0],p=$("#level")[0],y=30,w=n,k=[],x=void 0,b=void 0,I=1,M=0;m.width=21*y,m.height=21*y;var E=m.getContext("2d"),j=new Image;j.src=e;var C=new Image;C.src=t,$(document).keydown(function(n){switch(n.which){case 38:u("up");break;case 37:u("left");break;case 40:u("down");break;case 39:u("right")}}),function(){i(k),r(),h(k,x),u("right"),d()}()}!function(){function n(){a=$("input[name='bodyChoose']:checked").val()+".png",o=$("input[name='appleChoose']:checked").val()+".png",i=$("input[name='backgroundChoose']:checked").val(),c=$("input[name='difficultyChoose']:checked").val()}function e(){n(),"undefined.png"==a||"undefined.png"==o||void 0==i||void 0==c?t("https://api.myjson.com/bins/19rl5d"):newGame(c,o,a,i)}function t(n){$.getJSON(n,function(n){a=n.chosenSnake+".png",o=n.chosenApple+".png",i=n.chosenBackground,newGame(c=n.difficulty,o,a,i)})}var a=void 0,o=void 0,i=void 0,c=void 0;$("#clicked").on("click",function(){e()}),$("#one-json").on("click",function(){t("https://api.myjson.com/bins/19rl5d")}),$("#two-json").on("click",function(){t("https://api.myjson.com/bins/z1s9d")})}();